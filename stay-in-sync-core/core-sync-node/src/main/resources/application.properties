quarkus.http.port=8091

# RabbitMQ configuration
quarkus.rabbitmqclient.virtual-host=/
quarkus.rabbitmqclient.hostname=${RABBITMQ_HOST:localhost}
quarkus.rabbitmqclient.port=5672
quarkus.rabbitmqclient.username=${RABBITMQ_USERNAME:guest}
quarkus.rabbitmqclient.password=${RABBITMQ_PASSWORD:guest}
stayinsync.rabbitmq.queue.max-age=1m

# Native build arguments
quarkus.native.additional-build-args=-J-Djdk.console=jdk.base

# Configuration for the State-Service REST Client
# The 'configKey' from the @RegisterRestClient interface must be reused here.
state-service-api/mp-rest/url=${STATE_SERVICE_URL:http://localhost:8081}

# Logging configuration
quarkus.log.category."ScriptExecutionLogger".level=INFO
quarkus.log.category."de.unistuttgart.stayinsync.scriptengine".level=DEBUG
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{1.}] (%t) %X{jobId} %X{scriptId} %s%e%n

# Script Engine
scriptengine.context.pool.size.js=4

# Timeout Monitor
stayinsync.transformation.timeout=30S
stayinsync.transformation.monitor.interval=10s

# --- WebClient Configuration ---

# Connection timeout for the shared WebClient.
stayinsync.webclient.timeout=5s

# --- WebClient Security ---
# IMPORTANT: For production, 'trust-all' MUST be false.
# For local development or trusted internal networks ONLY, you can set this to true.
stayinsync.webclient.security.trust-all=true

# OPTIONAL BUT RECOMMENDED FOR PRODUCTION:
# Path to a PEM file containing the trusted root CA certificates for the systems you connect to.
# This is the most secure way to manage trust. The path can be an absolute path or relative to the classpath.
# If this property is set, 'trust-all' is ignored and forced to false.
# Example: stayinsync.webclient.security.pem-trust-store=/etc/ssl/certs/my-corp-ca.pem
stayinsync.webclient.security.pem-trust-store=

# Force Quarkus to index this dependency for proper CDI bean discovery
quarkus.index-dependency.graphengine.group-id=de.unistuttgart
quarkus.index-dependency.graphengine.artifact-id=stay-in-sync-graph-engine

# Container image
quarkus.container-image.image=core-sync-node
quarkus.container-image.group=stay-in-sync
quarkus.container-image.tag=latest

# Kubernetes
quarkus.kubernetes.image-pull-policy=Never

# Micrometer metrics
quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true

# Logs via TCP socket to Fluent Bit (port 5173)
quarkus.log.socket.enable=true
quarkus.log.socket.endpoint=${FLUENT_BIT_ADDRESS:localhost:5173}

# Disable JSON logging for dev and test profiles
%dev.quarkus.log.console.json.enabled=false
%test.quarkus.log.console.json.enabled=false

# Enable CORS
quarkus.http.cors.enabled=true

# Allowed origins (frontend runs on port 8099)
quarkus.http.cors.origins=*

# Allowed HTTP methods
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS

# Allowed request headers
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with

# Exposed response headers
quarkus.http.cors.exposed-headers=location,content-disposition


