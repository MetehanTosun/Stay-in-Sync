quarkus.http.port=8091

# RabbitMQ configuration
quarkus.rabbitmqclient.virtual-host=/
quarkus.rabbitmqclient.hostname=${RABBITMQ_HOST:localhost}
quarkus.rabbitmqclient.port=5672
quarkus.rabbitmqclient.username=${RABBITMQ_USERNAME:guest}
quarkus.rabbitmqclient.password=${RABBITMQ_PASSWORD:guest}

# Native build arguments
quarkus.native.additional-build-args=-J-Djdk.console=jdk.base

# Configuration for the State-Service REST Client
# The 'configKey' from the @RegisterRestClient interface must be reused here.
state-service-api/mp-rest/url=${STATE_SERVICE_URL:http://localhost:8081}

# Logging configuration
quarkus.log.category."ScriptExecutionLogger".level=INFO
quarkus.log.category."de.unistuttgart.stayinsync.scriptengine".level=DEBUG
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{1.}] (%t) %X{jobId} %X{scriptId} %s%e%n

# Script Engine
scriptengine.context.pool.size.js=4

# Force Quarkus to index this dependency for proper CDI bean discovery
quarkus.index-dependency.graphengine.group-id=de.unistuttgart
quarkus.index-dependency.graphengine.artifact-id=stay-in-sync-graph-engine

# Container image
quarkus.container-image.image=core-sync-node
quarkus.container-image.group=stay-in-sync
quarkus.container-image.tag=latest

# Kubernetes
quarkus.kubernetes.image-pull-policy=Never

# Micrometer metrics
quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true

# Logs via TCP socket to Fluent Bit (port 5173)
quarkus.log.socket.enable=true
quarkus.log.socket.endpoint=localhost:5173

# Disable JSON logging for dev and test profiles
%dev.quarkus.log.console.json.enabled=false
%test.quarkus.log.console.json.enabled=false

# Enable CORS
quarkus.http.cors.enabled=true

# Allowed origins (frontend runs on port 8099)
quarkus.http.cors.origins=*

# Allowed HTTP methods
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS

# Allowed request headers
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with

# Exposed response headers
quarkus.http.cors.exposed-headers=location,content-disposition


