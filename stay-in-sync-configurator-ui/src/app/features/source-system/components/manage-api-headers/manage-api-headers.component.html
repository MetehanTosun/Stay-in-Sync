<div class="">
  <form [formGroup]="form" class="inline-flex gap-10 p-4 mt-1!">
    <p-floatlabel variant="on">
      <p-select
        id="headerType"
        [options]="allowedHeaderTypes"
        optionLabel="label"
        optionValue="value"
        placeholder="Select type"
        formControlName="headerType">
      </p-select>
      <label for="headerType">Type</label>
    </p-floatlabel>
    <p-floatlabel variant="on">
      <input id="headerName" pInputText formControlName="headerName"/>
      <label for="headerType">Name</label>
    </p-floatlabel>
    <button pButton type="button" label="Add Header" [disabled]="form.invalid" (click)="addHeader()"></button>
    <button *ngIf="isAas" pButton type="button" class="p-ml-2 p-button-text" (click)="onRetest.emit()"></button>
  </form>
</div>

<div class="!mt-5 " style="height: 50rem">
  <p-table [value]="headers"
           paginator="true"
           paginatorPosition="bottom"
           [rows]="10"
           [scrollable]="true"
           scrollHeight="flex">
    <ng-template pTemplate="header">
      <tr>
        <th>Header Name</th>
        <th>Header Type</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-h>
      <tr>
        <td>{{ h.headerName }}</td>
        <td>{{ h.headerType }}</td>
        <td>
          <button pButton type="button" icon="pi pi-trash" class="p-button-text" (click)="deleteHeader(h)"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
  <!-- AAS hint -->
  <div *ngIf="isAas" class="p-mb-3" style="color:#555;">
    Accept/Content-Type werden bei AAS automatisch gesetzt und sind hier ausgeblendet.
  </div>
</div>

<!--
  Confirmation dialog for deletion
-->
<app-confirmation-dialog
  [(visible)]="showConfirmationDialog"
  [data]="confirmationData"
  (confirmed)="onConfirmationConfirmed()"
  (cancelled)="onConfirmationCancelled()">
</app-confirmation-dialog>
