<div class="p-card p-mt-4 p-p-4">
  <h4 class="p-mb-3">Query- und Path-Parameter für: {{ endpointPath || 'Endpoint' }}</h4>

  <!-- Form to Add a New Query Parameter -->
  <form [formGroup]="queryParamForm" (ngSubmit)="addQueryParam()" class="p-fluid p-formgrid p-grid p-mb-4">
    <div class="p-field p-col-6">
      <label for="paramName">Parameter Name</label>
      <input id="paramName" type="text" pInputText formControlName="paramName" />
      <!-- Keine spezielle Format-Fehlermeldung mehr nötig -->
    </div>
    <div class="p-field p-col-4">
      <label for="paramType">Typ</label>
      <p-dropdown id="paramType"
                  [options]="paramTypes"
                  optionLabel="label"
                  optionValue="value"
                  formControlName="queryParamType"></p-dropdown>
    </div>
    <div class="p-field p-col-2 p-d-flex p-ai-end">
      <button pButton
              type="submit"
              label="Hinzufügen"
              icon="pi pi-plus"
              [disabled]="queryParamForm.invalid"></button>
    </div>
  </form>

  <!-- Table of Existing Query Parameters -->
  <p-table [value]="queryParams" [loading]="queryParamsLoading" responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th>Name</th>
        <th>Typ</th>
        <th style="width: 8rem">Aktionen</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-param>
      <tr>
        <td>{{ param.paramName }}</td>
        <td>{{ param.queryParamType }}</td>
        <td>
          <button pButton
                  type="button"
                  icon="pi pi-trash"
                  class="p-button-danger p-button-text"
                  (click)="deleteQueryParam(param.id!)"></button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="3">Keine Parameter für diesen Endpoint vorhanden</td>
      </tr>
    </ng-template>
  </p-table>
</div> 